# 数据库设计
- 楼宇表（Buildings）
  - 楼宇ID
  - 楼宇名称

```sql
DROP TABLE IF EXISTS Buildings;
CREATE TABLE Buildings (
    building_id INT PRIMARY KEY,
    building_name VARCHAR(50) NOT NULL
);
```

- 宿舍表 (Dormitories)
  - 宿舍ID
  - 宿舍名称
  - 宿舍楼层
  - 宿舍类型（男生宿舍、女生宿舍等）

```sql
DROP TABLE IF EXISTS Dormitories;
CREATE TABLE Dormitories (
    dormitory_id INT PRIMARY KEY AUTO_INCREMENT,
    dormitory_name VARCHAR(50) NOT NULL,
    dormitory_floor INT NOT NULL,
    dormitory_type VARCHAR(50) NOT NULL,
    building_id INT NOT NULL,
    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

- 院系表（Departments）
  - 院系ID
  - 院系名称
  - 院系负责人

```sql
DROP TABLE IF EXISTS Departments;
CREATE TABLE Departments (
    department_id INT PRIMARY KEY AUTO_INCREMENT,
    department_nane VARCHAR(50) NOT NULL,
    department_person VARCHAR(50) NOT NULL
);
```

- 学生表（Students）
  - 学生ID
  - 学生姓名
  - 所属宿舍ID
  - 院系ID 

```sql
DROP TABLE IF EXISTS Students;
CREATE TABLE Students (
    student_id INT PRIMARY KEY AUTO_INCREMENT,
    student_nane VARCHAR(255) NOT NULL,
    dormitory_id INT NOT NULL,
    department_id INT NOT NULL,
    FOREIGN KEY (dormitory_id) REFERENCES Dormitories(dormitory_id),
    FOREIGN KEY (department_id) REFERENCES Departments(department_id)
);
```

- 电费使用表 (ElectricityUsage)
  - 使用ID
  - 宿舍ID
  - 使用日期
  - 消费

```sql
DROP TABLE IF EXISTS ElectricityUsage;
CREATE TABLE ElectricityUsage (
    usage_id INT PRIMARY KEY AUTO_INCREMENT,
    dormitory_id INT NOT NULL,
    usage_date DATE,
    consumption DECIMAL(10, 2),
    FOREIGN KEY (dormitory_id) REFERENCES Dormitories(dormitory_id)
);
```

- 管理员表 (Managers)
  - 管理员ID
  - 用户名
  - 密码哈希
  - 盐值

```sql
DROP TABLE IF EXISTS Managers;
CREATE TABLE Managers (
    manager_id INT PRIMARY KEY AUTO_INCREMENT,
    manager_username VARCHAR(50) NOT NULL,
    manager_password_hash VARCHAR(255) NOT NULL,
    manager_salt VARCHAR(50) NOT NULL,
    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

- 访客表 (Visitors)
  - 访客ID
  - 访客姓名
  - 身份证号
  - 访问日期时间
  - 被访学生ID
  - 访问目的

```sql
DROP TABLE IF EXISTS Visitors;
CREATE TABLE Visitors (
    visitor_id INT PRIMARY KEY AUTO_INCREMENT,
    visitor_name VARCHAR(50) NOT NULL,
    visitor_id_card VARCHAR(20) NOT NULL,
    visit_datetime DATETIME NOT NULL,
    student_id INT,
    visit_purpose VARCHAR(100),
    FOREIGN KEY (student_id) REFERENCES Students(student_id),
    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

- 财产表（Assets）
  - 财产ID
  - 财产名称
  - 财产型号
  - 财产状态
  - 所属部门ID
  - 所处宿舍ID

```sql
DROP TABLE IF EXISTS Assets;
CREATE TABLE Assets (
    asset_id INT PRIMARY KEY AUTO_INCREMENT,
    asset_name VARCHAR(50) NOT NULL,
    asset_model VARCHAR(50) NOT NULL,
    asset_status VARCHAR(50) NOT NULL,
    department_id INT NOT NULL,
    dormitory_id INT NOT NULL,
    FOREIGN KEY (department_id) REFERENCES Departments(department_id),
    FOREIGN KEY (dormitory_id) REFERENCES Dormitories(dormitory_id),
    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

- 报修表 (Repairs)
  - 报修ID
  - 宿舍ID
  - 报修原因
  - 报修日期
  - 状态
  - 修复日期

```sql
DROP TABLE IF EXISTS Repairs;
CREATE TABLE Repairs (
    repair_id INT PRIMARY KEY AUTO_INCREMENT,
    dormitory_id INT NOT NULL,
    repair_purpose VARCHAR(100) NOT NULL,
    report_date DATE NOT NULL,
    asset_status VARCHAR(50),
    repair_date DATE,
    FOREIGN KEY (dormitory_id) REFERENCES Dormitories(dormitory_id),
    FOREIGN KEY (asset_status) REFERENCES Assets(asset_status),
    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

- 报废记录表 (DisposalRecords)
  - 报废ID
  - 财产ID
  - 财产状态
  - 报废原因
  - 报废日期

```sql
DROP TABLE IF EXISTS DisposalRecords;
CREATE TABLE DisposalRecords (
    disposal_id INT PRIMARY KEY AUTO_INCREMENT,
    asset_id INT NOT NULL,
    asset_status VARCHAR(50),
    disposal_purpose VARCHAR(100) NOT NULL,
    disposal_date DATE NOT NULL,
    FOREIGN KEY (asset_status) REFERENCES Assets(asset_status),
    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```